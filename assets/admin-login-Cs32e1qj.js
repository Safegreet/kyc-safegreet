import{K as b,r,u as w,b as N,x as i,A as v,G as y,j as e,D as P,F as a,I as t,L as C,H as E,B as I,J as L}from"./index-DCoLUc3e.js";const T=({onLoginSuccess:A})=>{const{mutate:x,data:n,error:o,isLoading:l,isError:c,isSuccess:d}=b(),h=r.useRef(null),m=w(),p=N(),[u,g]=r.useState(""),f=s=>{L(u)?x(s):i.error("CAPTCHA validation failed! Please try again.")};return r.useEffect(()=>{d&&(i.success("Login Success!"),p(v(n.data.jwt_token)),m("/"))},[d,n]),r.useEffect(()=>{c&&i.error(o.message)},[c,o]),r.useEffect(()=>{y(4,"#000","#fff","numbers")},[]),e.jsx(P,{children:e.jsx("main",{className:"relative h-full flex flex-col justify-center bg-indigo-500 overflow-hidden px-4",children:e.jsxs("div",{className:"w-100 max-w-6xl mx-auto px-0 md:px-6 my-2 mb-12 md:py-24",children:[e.jsx("h1",{className:"text-4xl text-white pacifico-regular w-100 text-center my-5",children:"SafeGreet!"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full mx-auto text-center bg-white px-3 sm:px-5 py-3 rounded-xl shadow",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-indigo-500 mb-1",children:"Login"}),e.jsx("p",{className:"text-[15px] text-slate-500",children:"Please login using your email/phone and password."})]}),e.jsxs(a,{onFinish:f,ref:h,layout:"vertical",initialValues:{remember:!0},children:[e.jsx(a.Item,{name:"alias",label:"Identifier",rules:[{required:!0,message:"Please enter your domain identifier!"}],className:"!mb-2",children:e.jsx(t,{placeholder:"Enter domain identifier",className:"w-80 px-4 border rounded-md"})}),e.jsx(a.Item,{name:"identifier",label:"Email / Phone",rules:[{required:!0,message:"Please enter your email or username!"}],className:"!mb-2",children:e.jsx(t,{placeholder:"Enter your email or username",className:"w-80 px-4 border rounded-md"})}),e.jsx(a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter your password!"},{min:6,message:"Password must be at least 6 characters!"}],className:"!mb-3",children:e.jsx(t.Password,{placeholder:"Enter your password",className:"w-80 px-4 border rounded-md"})}),e.jsx(a.Item,{className:"flex items-center justify-center !mb-2",children:e.jsxs("div",{className:"captcha-wrapper w-80",children:[e.jsx(C,{}),e.jsx(t,{placeholder:"Enter the CAPTCHA",className:"px-4 border rounded-md ",value:u,pattern:"[a-zA-Z0-9]{4}",onInput:s=>{s.target.value=s.target.value.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()},onChange:s=>g(s.target.value)})]})}),e.jsx(a.Item,{name:"terms",valuePropName:"checked",rules:[{validator:(s,j)=>j?Promise.resolve():Promise.reject(new Error("You must accept the terms and conditions"))}],className:"!mb-3",children:e.jsxs(E,{children:["I agree to the"," ",e.jsx("a",{href:"/terms",target:"_blank",className:"text-indigo-500",children:"Terms"})," ","and"," ",e.jsx("a",{href:"/policy",target:"_blank",className:"text-indigo-500",children:"Privacy Policy"})]})}),e.jsx(I,{htmlType:"submit",className:"w-80 mt-1 bg-indigo-500 text-white px-2 rounded-lg",disabled:l,loading:l,children:l?"Logging in...":"Login"}),e.jsx("div",{className:"text-center w-full text-slate-500 mt-1 text-[12px] ",children:e.jsx("span",{className:"cursor-pointer text-indigo-500",onClick:()=>m("/reset-password"),children:"Forgot password? Click here to reset"})})]})]})})]})})})};export{T as default};
