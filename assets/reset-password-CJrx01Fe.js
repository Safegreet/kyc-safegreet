import{s as f,v as j,r as w,u as y,w as g,x as n,j as e,D as P,F as u,I as h,B as b}from"./index-DCoLUc3e.js";const N=()=>{const d=async a=>(await j.post("/password-reset-confirm/",a,{headers:{"Content-Type":"application/json","X-Tenant-UUID":a.company}})).data,{mutate:t,data:i,error:l,isLoading:o,isError:r,isSuccess:c}=f(d);return{mutate:t,data:i,error:l,isLoading:o,isError:r,isSuccess:c}},E=()=>{const{mutate:d,isLoading:t}=N(),i=w.useRef(null),l=y(),{token:o,company:r}=g(),c=a=>{const m={...a,token:o,company:r};if(!r||!o)return n.error("Password reset link expired!");d(m,{onSuccess:()=>{n.success("Password reset successful!"),l("/?c="+r,{replace:!0})},onError:s=>{var x,p;(p=(x=s==null?void 0:s.response)==null?void 0:x.data)!=null&&p.data&&n.error(s.response.data.data)}})};return w.useEffect(()=>{(!r||!o)&&n.error("Password reset link expired!")},[]),e.jsx(P,{children:e.jsx("main",{className:"relative h-full flex flex-col justify-center bg-indigo-500 overflow-hidden px-4",children:e.jsxs("div",{className:"w-100 max-w-6xl mx-auto px-0 md:px-6 my-2 mb-12 md:py-24",children:[e.jsx("h1",{className:"text-4xl text-white pacifico-regular w-100 text-center my-5",children:"SafeGreet"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full mx-auto text-center bg-white px-4 sm:px-8 py-10 rounded-xl shadow",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-indigo-500 mb-1",children:"Reset your password"}),e.jsx("p",{className:"text-[15px] text-slate-500",children:"Enter your new password below."})]}),e.jsxs(u,{onFinish:c,ref:i,layout:"vertical",children:[e.jsx(u.Item,{name:"password",label:"New Password",rules:[{required:!0,message:"Please enter your new password!"},{min:6,message:"Password must be at least 6 characters!"}],children:e.jsx(h.Password,{placeholder:"Enter your new password",className:"w-80 px-4 border rounded-md"})}),e.jsx(u.Item,{name:"confirm_password",label:"Confirm Password",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},({getFieldValue:a})=>({validator(m,s){return!s||a("password")===s?Promise.resolve():Promise.reject(new Error("The two passwords do not match!"))}})],children:e.jsx(h.Password,{placeholder:"Confirm your new password",className:"w-80 px-4 border rounded-md"})}),e.jsx(b,{htmlType:"submit",className:"w-80 mt-1 bg-indigo-500 text-white px-2 rounded-lg",disabled:t,loading:t,children:t?"Resetting...":"Reset Password"})]})]})})]})})})};export{E as default};
